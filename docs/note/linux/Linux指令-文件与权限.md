# Linux指令-文件与权限

## 1. 文件目录管理命令

### 1.1 ls（list files）

命令描述：用于显示指定目录下的内容。

命令格式：`ls [参数] [目录名]`

参数说明：

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -a   | 显示所有文件及目录（包括隐藏文件）                           |
| -l   | 将文件的权限、拥有者、文件大小等详细信息列出（ll等同于ls -l） |
| -r   | 将文件反序列出（默认按英文字母正序）                         |
| -t   | 将文件按创建时间正序列出（近期的在前）                       |
| -R   | 递归遍历目录下文件                                           |

### 1.2 pwd（print work directory）

命令描述：用于获取当前目录的绝对路径。

命令格式：`pwd`

### 1.3 cd（change directory）

命令描述：用于切换目录。

命令格式：`cd [路径]`

> 在路径表示中：
> - 一个半角句号（.）表示当前目录，例如路径./daning/project等同于daning/project。
> - 两个半角句号（..）表示上级目录，例如路径/daning/project/../code等同于/daning/code，其中project和code目录同级。

> cd命令的默认参数为~，符号~表示当前用户的家目录，即在root用户登录时，命令cd、cd ~和cd /root执行效果相同。

### 1.4 touch

命令描述：用于修改文件或目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会新建该文件。

命令格式：`touch [参数] [文件]`

参数说明：

| 参数 | 说明                               |
| ---- | ---------------------------------- |
| -c   | 如果指定文件不存在时，系统不会新建该文件 |
| -r   | 使用参考文件的时间记录             |
| -t   | 设置文件的时间记录                 |

```bash
1.创建两个空文件
touch demo1.txt demo2.txt

2.修改demo1.txt的时间记录为当前系统时间
touch demo1.txt

3.更新demo2.txt的时间记录，使其与demo1.txt的时间记录相同
touch -r demo1.txt demo2.txt
```

### 1.5 mkdir（make directory）

命令描述：用于新建子目录（-p参数，确保当目录不存在时，自动创建）。

```bash
1.在当前路径下，新建目录a/b/c/d，并使用tree命令查看创建后的目录结构
mkdir -p a/b/c/d
tree

2.在root路径下，新建目录l/o/v/e
mkdir -p /root/l/o/v/e
```

### 1.6 rm（remove）

命令描述：用于删除文件或目录。

命令格式：`rm [参数] [文件]`

参数说明：

| 参数 | 说明                                       |
| ---- | ------------------------------------------ |
| -i   | 删除前逐一询问确认                         |
| -f   | 无需确认，直接删除                         |
| -r   | 删除目录下所有文件（该参数针对于目录操作） |

```bash
1.无需确认直接删除当前目录中，文件名为demo开头的所有文件
rm -f

2.无需确认直接删除当前目录中，a目录及其所有子目录与文件
rm -rf a
```

### 1.7 cp（copy file）

命令描述：主要用于复制文件或目录。

命令格式：`cp [参数] [源文件] [目标文件]`

参数说明：

| 参数 | 说明                                                       |
| ---- | ---------------------------------------------------------- |
| -d   | 复制时保留链接                                             |
| -f   | 覆盖已经存在的目标文件而不给出提示                         |
| -i   | 覆盖前询问                                                 |
| -p   | 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中 |
| -r   | 复制目录及目录内的所有项目                                 |

```bash
1.将目录c中的所有内容复制到目录a的子目录b下
mkdir -p a/b
mkdir -p c/d
tree

cp -r c a/b
```

### 1.8 mv（move file）

命令描述：用来为文件或目录改名、或将文件或目录移入其它位置。

命令格式：`mv [参数] [源文件] [目标文件]`

参数说明：

| 参数 | 说明                                           |
| ---- | ---------------------------------------------- |
| -i   | 若指定目录已有同名文件，则先询问是否覆盖旧文件 |
| -f   | 如果目标文件已经存在，不会询问而直接覆盖       |

```bash
1.将文件名a.txt改为b.txt
touch a.txt
ls
mv a.txt b.txt
ls

2.将目录c移动到目录a的子目录b下
mkdir -p a/b
mkdir -p c/d
mv c a/b

3.将当前目录内容全部移动到/tmp目录中
mv ./* /tmp
```

### 1.9 rename

命令描述：用字符串替换的方式批量改变文件名。rename命令有C语言和Perl语言两个版本，这里介绍C语言版本的rename命令，不支持正则表达式。

```bash
1.将当前目录下所有文件名中的字符串demo改为大写的字符串DEMO 
touch demo1.txt demo2.txt
ls
rename demo DEMO *
ls

2.将当前目录下所有.txt文件后缀都改为text
rename .txt .text *
ls
```

## 2. 文件权限

### 2.1 ll（ls -l）

命令描述：可以查看Linux系统上的文件、目录和设备的权限。

ll命令中显示的第一列就是文件权限信息，共11位字符，分5部分：
> - 第1位表示存档类型，d表示目录，-表示一般文件
> - 第2~4位表示当前用户的权限（属主权限）
> - 第5~7位表示同用户组的用户权限（属组权限）
> - 第8~10位表示不同用户组的用户权限（其他用户权限）
> - 第11位是一个半角句号（.），表示SELinux安全标签

用户权限每组三位，rwx分别表示读、写、执行权限，对应八进制表示为4、2、1

> 例如：目录daning的root用户权限为drwxr-xr-x.
> - 该目录对root用户具有读写和执行所有权限
> - 该目录对root组其他用户有读和执行权限
> - 该目录对其他用户有读和执行权限
> - 因此该权限对应的八进制表示为：755，即：属主权限（4+2+1=7）属组权限（4+1=5）其他用户权限（4+1=5）

### 2.2 chmod（change mode）

命令描述：用于修改文件的属主和属组；-R参数以递归方式对子目录和文件进行修改；ls -l命令显示的第三列和第四列就是文件的属主和属组信息。

```bash
1.新建一个文本文件test.txt，用ll命令可以看到该文件的属主和属组是root，whoami命令可以查看当前Shell环境登录的用户名
whoami
touch test.txt
ll

2.创建两个用户
adduser daning
passwd daning
adduser admin
passwd admin

3.修改text.txt文件的属主用户为daning
chown daning test.txt

4.修改test.txt文件的属主和属组为admin
chown admin:admin test.txt
ll
```

### 2.3 chgrp（change group）

命令描述：用于变更文件或目录的所属群组。

```bash
1.将test.txt文件的属组改为root
chgrp root test.txt
```

